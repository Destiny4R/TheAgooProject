function blockcallback(){$.blockUI({message:'<div class="bs-spinner mt-4 mt-lg-0"><div class= "spinner-border text-success mr-2 mt-2" style="width: 10rem; height: 10rem;" role="status"><span class="sr-only">Loading...<\/span><\/div> ',fadeIn:800,overlayCSS:{backgroundColor:"#1b2024",opacity:.8,zIndex:1200,cursor:"wait"},css:{border:0,color:"#fff",zIndex:1201,padding:0,backgroundColor:"transparent"},onBlock:function(){}})}$(document).ready(function(){function n(n){return n>=75?"A":n>=65?"B":n>=55?"C":n>=40?"D":"E"}function t(n){return n>=75?"Distinction":n>=65?"Very Good":n>=55?"Good":n>=40?"Fair":"Poor"}$("#resultcalculatorSm tbody tr").on("keyup","input[type='number']",function(){var r=$("#noelective").val();const h=$(this).closest("tr").find("#assign"),c=$(this).closest("tr").find("#proj"),l=$(this).closest("tr").find("#cwork"),a=$(this).closest("tr").find("#test"),v=$(this).closest("tr").find("#exams"),u=parseFloat(h.val())||0,o=parseFloat(c.val())||0,s=parseFloat(a.val())||0,f=parseFloat(l.val())||0,e=parseFloat(v.val())||0,i=u+s+o+f+e;if($(this).closest("tr").find("#total").val(i),$(this).closest("tr").find("#grade").val(n(i)),$(this).closest("tr").find("#remark").val(t(i)),r=="noelective"){if(u>10)return $(this).closest("tr").find("#assign").val(0),$(this).closest("tr").find("#total").val(0),Swal.fire({icon:"error",title:"Oops...",text:"Assignment should not be greater than 10, check and try again",footer:"Over assigned scores"})}else if(u>5)return $(this).closest("tr").find("#assign").val(0),$(this).closest("tr").find("#total").val(0),Swal.fire({icon:"error",title:"Oops...",text:"Assignment should not be greater than 5, check and try again",footer:"Over assigned scores"});if(r=="noelective"){if(f>10)return $(this).closest("tr").find("#cwork").val(0),$(this).closest("tr").find("#total").val(0),Swal.fire({icon:"error",title:"Oops...",text:"Class work should not be greater than 10, check and try again",footer:"Over assigned scores"})}else if(f>5)return $(this).closest("tr").find("#cwork").val(0),$(this).closest("tr").find("#total").val(0),Swal.fire({icon:"error",title:"Oops...",text:"Class work should not be greater than 5, check and try again",footer:"Over assigned scores"});if(s>10)return $(this).closest("tr").find("#test").val(0),$(this).closest("tr").find("#total").val(0),Swal.fire({icon:"error",title:"Oops...",text:"Test scores should not be greater than 10, check and try again",footer:"Over assigned scores"});if(o>10)return $(this).closest("tr").find("#proj").val(0),$(this).closest("tr").find("#total").val(0),Swal.fire({icon:"error",title:"Oops...",text:"Project scores should not be greater than 10, check and try again",footer:"Over assigned scores"});if(r=="noelective"){if(e>60)return $(this).closest("tr").find("#exams").val(0),$(this).closest("tr").find("#total").val(0),Swal.fire({icon:"error",title:"Oops...",text:"Examination should not be greater than 60, check and try again",footer:"Over assigned scores"})}else if(e>70)return $(this).closest("tr").find("#exams").val(0),$(this).closest("tr").find("#total").val(0),Swal.fire({icon:"error",title:"Oops...",text:"Examination should not be greater than 70, check and try again",footer:"Over assigned scores"});if(i>100)return $(this).closest("tr").find("#exams").val(0),$(this).closest("tr").find("#total").val(0),alert("Total scores can not be morethan 100, check and try again")});$("#btnSave").click(function(){var n=[];if($("#resultcalculatorSm tbody tr").each(function(){var t={};t.Assignment=$(this).find("#assign").val();t.Test=$(this).find("#test").val();t.project=$(this).find("#proj").val();t.classWork=$(this).find("#cwork").val();t.examination=$(this).find("#exams").val();t.total=$(this).find("#total").val();t.grade=$(this).find("#grade").val();t.remark=$(this).find("#remark").val();t.termRegId=$("#termregId").val();t.subjectsCode=$(this).find("#subjectcode").val();n.push(t)}),Object.keys(n).length<1)return Swal.fire({icon:"error",title:"Oops...",text:"No data added to be posted!",footer:"Missing Scores"});$.ajax({type:"POST",url:"/api/SendResult",data:n,contentType:"application/x-www-form-urlencoded; charset=UTF-8",cache:!1,beforeSend:function(){blockcallback()},success:function(n){n.success?(swal.fire("Result Uploading Information!",n.message,"success"),$.unblockUI(),$("#thedivdata").remove()):Swal.fire({icon:"error",title:"Oops...",text:n.message,footer:"Result Uploading Fail"})},error:function(){$.unblockUI();Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"Check internet connectivity"})},complete:function(){$.unblockUI()},error:function(){Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"Check internet connectivity"})}})})});