function blockcallback(){$.blockUI({message:'<div class="bs-spinner mt-4 mt-lg-0"><div class= "spinner-border text-success mr-2 mt-2" style="width: 10rem; height: 10rem;" role="status"><span class="sr-only">Loading...<\/span><\/div>',fadeIn:800,overlayCSS:{backgroundColor:"#1b2024",opacity:.8,zIndex:1200,cursor:"wait"},css:{border:0,color:"#fff",zIndex:1201,padding:0,backgroundColor:"transparent"},onBlock:function(){}})}var datatable,classbtn="",classfa="",ap="";$(document).ready(function(){datatable=$("#tech-companies-1").DataTable({processing:!0,serverSide:!1,filter:!1,responsive:!1,destroy:!0,info:!1,paging:!1,pageLength:100,ajax:{url:"/Home/ResultComputation",type:"POST",datatype:"json"},columnDefs:[{visible:!1,searchable:!1}],columns:[{data:"id",render:function(n,t,i,r){return r.row+r.settings._iDisplayStart+1}},{data:"fullname",autoWidth:!0},{data:"studentRegNo",autoWidth:!0},{data:"term",autoWidth:!0},{data:"sessionYear",autoWidth:!0},{data:"classes",autoWidth:!0},{data:"subClass",autoWidth:!0},{data:null,render:function(n){return n.status?`<span class="badge h4 bg-success" title="Results have been successfully uploaded">${n.subjectsState}</span>`:`<label title="Results are yet to be uploaded or added" class="badge h3 bg-danger">${n.subjectsState}</label>`}},{data:null,render:function(n){return n.attendance?`<span class="badge h4 bg-success" title="Attendance not added"><i class="fas fa-check-double"></i></span>`:`<label title="Attendance yet to be added" class="badge bg-danger"><i class="far fa-times-circle"></i></label>`}},{data:null,render:function(n){return n.remarkStatus?`
                        <div class="d-flex justify-content-between">
                            <a class="btn btn-info btn-sm" title="View results in detail" href="/Compute-Result/Detail-Result?id=${n.termRegId}" style="cursor:pointer">
                                <i class="fa fa-eye"></i>
                            </a>&nbsp;
                            <a class="btn btn-success btn-sm" href="/Compute-Result/Remark-Comment?id=${n.termRegId}" style="cursor:pointer" title="Edit student remark">
                                <i class="fas fa-check-double"></i> &nbsp; Remark
                            </a>
                        </div>
                    `:`
                        <div class="d-flex justify-content-between">
                            <a class="btn btn-info btn-sm" title="View results in detail" href="/Compute-Result/Detail-Result?id=${n.termRegId}" style="cursor:pointer">
                                <i class="fa fa-eye"></i>
                            </a>&nbsp;
                            <a class="btn btn-danger btn-sm" href="/Compute-Result/Remark-Comment?id=${n.termRegId}" style="cursor:pointer" title="Add student remark">
                                <i class="fas fa-window-close"></i> &nbsp; Remark
                            </a>
                        </div>
                    `}}]})});$("body").on("click","#btnpublish",function(){var n=$("#theterm").find(":selected").val(),t=$("#thesession").find(":selected").val();n!=""&&t!=""?$.ajax({type:"POST",url:"/api/PublistResult",data:{"input.term":n,"input.session":t},dataType:"json",beforeSend:function(){blockcallback()},success:function(n){$.unblockUI();n.success?swal.fire("Result Publishing!",n.message,"success"):Swal.fire({icon:"error",title:"Oops...",text:n.message,footer:"Result Publication Error!"})},complete:function(){$.unblockUI()},error:function(){$.unblockUI();Swal.fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:"Check internet connectivity"})}}):Swal.fire({icon:"error",title:"Oops...",text:"Select Session/Year & Term before publishing the result",footer:"Result Publication Failed!"})});